# 03_advanced_eda.R: 심층 탐색적 데이터 분석

## 1. 스크립트 개요

`03_advanced_eda.R` 스크립트는 분할된 훈련 데이터를 사용하여 심층적인 탐색적 데이터 분석을 수행합니다. 특히, 임상적 특성 비교, 변수 간 상관관계 분석, 생존 분석에 초점을 맞춥니다.

## 2. 주요 기능

-   **입력 데이터**: `data/modeling_datasets/total/total_train.csv`

### 2.1. 데이터 준비

-   생존 분석을 위해 생존 객체(`Surv`)를 생성합니다. (`생존기간_일`과 `사망여부` 변수 사용)
-   분석에 필요한 변수들을 선택하고 데이터 타입을 정리합니다.

### 2.2. 임상 특성 비교

-   **조기 발병(EOCRC)**과 **후기 발병(LOCRC)** 그룹 간의 임상적 특성을 비교 분석합니다.
    -   **분석 항목**: 병기(Stage), 수술/항암/방사선 치료 여부, 분자병리검사(KRAS, MSI) 시행률 등
    -   **시각화**: 각 특성별 비율을 막대그래프로 시각화합니다.

### 2.3. 상관관계 및 수치 변수 분석

-   주요 수치형 변수들 간의 상관관계를 분석하고 히트맵(Heatmap)으로 시각화합니다.
-   암 병기(Stage)에 따른 종양표지자수치(CEA) 값의 분포를 박스플롯(Boxplot)으로 비교 분석합니다.

### 2.4. 생존 분석 (Survival Analysis)

-   **카플란-마이어(Kaplan-Meier) 생존 곡선**을 이용하여 그룹별 생존율을 비교합니다.
-   **분석 그룹**:
    1.  **전체 환자 그룹**: 전체 코호트의 생존 곡선 및 중앙 생존 기간을 계산합니다.
    2.  **연령 그룹별 비교**: EOCRC와 LOCRC 그룹 간의 생존 곡선을 비교합니다. (Log-rank test 포함)
    3.  **병기별 비교**: 암 병기(0-4기)에 따른 생존 곡선을 비교합니다.

## 3. 출력물

-   **분석 요약 파일**: 모든 분석 결과(테이블, 통계치)를 텍스트 파일로 저장합니다.
    -   `results/advanced_eda/00_advanced_eda_summary.txt`
-   **시각화 자료**: 모든 분석 그래프(막대그래프, 히트맵, 박스플롯, 생존 곡선)를 이미지 파일로 저장합니다.
    -   `results/advanced_eda/` 폴더 내에 각 분석별 `.png` 파일로 저장
